<li class="session-supervising-candidate-in-list">
  {{#unless @candidate.hasStarted}}
    <PixInput
      @id={{concat "candidate-checkbox-" @candidate.id}}
      class="session-supervising-candidate-in-list__checkbox"
      type="checkbox"
      checked={{@candidate.authorizedToStart}}
      {{on 'click' (fn this.toggleCandidate @candidate)}}
    />
  {{/unless}}
  <div class="session-supervising-candidate-in-list__candidate-data">
    <div class="session-supervising-candidate-in-list__full-name">
      {{#if @candidate.hasStarted}}
        {{@candidate.lastName}} {{@candidate.firstName}}
      {{else}}
        <label for={{concat "candidate-checkbox-" @candidate.id}}>
          {{@candidate.lastName}} {{@candidate.firstName}}
        </label>
      {{/if}}
    </div>
    <div class="session-supervising-candidate-in-list__details">
      {{moment-format @candidate.birthdate "DD/MM/YYYY"}}
      {{#if @candidate.extraTimePercentage}}
        · Temps majoré : {{@candidate.extraTimePercentage}}%
      {{/if}}
    </div>
    {{#if @candidate.hasStarted}}
      <span class="session-supervising-candidate-in-list__status session-supervising-candidate-in-list__status--started">
        En cours
      </span>
    {{/if}}
  </div>
  {{#if @candidate.hasStarted}}
    <div class="session-supervising-candidate-in-list__menu">
      <PixIconButton
        @icon="ellipsis-v"
        aria-label="Afficher les options du candidat"
        @triggerAction={{this.toggleMenu}}
      />
      <Dropdown::Content @display={{this.isMenuOpen}} @close={{this.closeMenu}} aria-label="Options du candidat">
        <Dropdown::Item @onClick={{this.askUserToConfirmTestResume}}>
          Autoriser la reprise du test
        </Dropdown::Item>
        <Dropdown::Item @onClick={{this.askUserToConfirmTestEnd}}>
          Terminer le test
        </Dropdown::Item>
      </Dropdown::Content>
    </div>
  {{/if}}

  {{#if this.isConfirmationModalDisplayed}}
    <SessionSupervising::ConfirmationModal
      @closeConfirmationModal={{this.closeConfirmationModal}}
      @authorizeTestResume={{this.authorizeTestResume}}
      @candidate={{this.candidate}}
    >
      <:instruction>
        Autoriser {{@candidate.firstName}} {{@candidate.lastName}} à reprendre son test ?
      </:instruction>
      <:description>
        Si le candidat a fermé la fenêtre de son test de certification (par erreur, ou à cause d'un problème technique) et est toujours présent dans la salle de test, vous pouvez lui permettre de reprendre son test à l'endroit où il l'avait quitté.
      </:description>
    </SessionSupervising::ConfirmationModal>
  {{/if}}

  {{#if this.isEndTestConfirmationModalDisplayed}}
    <SessionSupervising::EndTestConfirmationModal
      @closeConfirmationModal={{this.closeConfirmationModal}}
      @endTestForCandidate={{this.endTestForCandidate}}
      @candidate={{this.candidate}}
    >
      <:instruction>
        Terminer le test de {{@candidate.firstName}} {{@candidate.lastName}} ?
      </:instruction>
      <:description>
        Attention : cette action entraine la fin de son test de certification et est irréversible.
      </:description>
    </SessionSupervising::EndTestConfirmationModal>
  {{/if}}

</li>
